[gd_scene load_steps=10 format=3 uid="uid://nbkvr20vhw44"]

[ext_resource type="Terrain3DAssets" uid="uid://dal3jhw6241qg" path="res://demo/data/assets.tres" id="1_md68i"]
[ext_resource type="PackedScene" uid="uid://cx2rpesjr050y" path="res://temporary_folder/rat.tscn" id="2_iixdh"]
[ext_resource type="PackedScene" uid="uid://domhm87hbhbg1" path="res://demo/components/Player.tscn" id="2_j3r6d"]
[ext_resource type="Script" uid="uid://cvet4ojd3l7lk" path="res://temporary_folder/swarm_manager.gd" id="3_qldgr"]

[sub_resource type="NavigationMesh" id="NavigationMesh_j3r6d"]
vertices = PackedVector3Array(36.036, 3.003, -285.285, 24.024, 3.003, -285.285, 15.015, 3.003, -273.273, -51.051, 3.003, -219.219, -60.06, 3.003, -213.213, -60.06, 3.003, -195.195, -39.039, 3.003, -123.123, -33.033, 3.003, -114.114, -15.015, 3.003, -114.114, -39.039, 3.003, -141.141, -45.045, 3.003, -171.171, -48.048, 3.003, -150.15, -15.015, 3.003, -249.249, 63.063, 3.003, -57.057, 81.081, 3.003, -42.042, 150.15, 3.003, -267.267, 3.003, 3.003, -273.273, -51.051, 3.003, -240.24, -6.006, 3.003, -105.105, 45.045, 3.003, -57.057, 87.087, 3.003, -315.315, 60.06, 3.003, -318.318, -18.018, 3.003, -54.054, 33.033, 3.003, -48.048, 234.234, 3.003, -21.021, 249.249, 3.003, -30.03, 249.249, 3.003, -48.048, 183.183, 3.003, -264.264, 165.165, 3.003, -270.27, 183.183, 3.003, 9.009, 207.207, 3.003, 15.015, 222.222, 3.003, 12.012, 81.081, 3.003, -39.039, 114.114, 3.003, -6.006, 135.135, 3.003, 27.027, 159.159, 3.003, 27.027, 264.264, 3.003, -60.06, 276.276, 3.003, -96.096, 282.282, 3.003, -183.183, 240.24, 3.003, -282.282, 216.216, 3.003, -282.282, 306.306, 3.003, -123.123, 300.3, 3.003, -174.174, -27.027, 3.003, -24.024, -27.027, 3.003, -9.009, -18.018, 3.003, 0, 72.072, 3.003, 18.018, 102.102, 3.003, 18.018, 108.108, 3.003, -3.003, 72.072, 3.003, -27.027, 42.042, 3.003, -27.027, 30.03, 3.003, -39.039, 45.045, 6.006, -51.051, 36.036, 6.006, -45.045, 42.042, 6.006, -33.033, 75.075, 6.006, -36.036, 75.075, 6.006, -45.045, 63.063, 6.006, -51.051)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(7, 6, 8), PackedInt32Array(8, 6, 9), PackedInt32Array(9, 11, 10), PackedInt32Array(12, 0, 10), PackedInt32Array(10, 0, 15), PackedInt32Array(10, 15, 13), PackedInt32Array(13, 15, 14), PackedInt32Array(12, 16, 2), PackedInt32Array(3, 17, 12), PackedInt32Array(5, 3, 10), PackedInt32Array(10, 3, 12), PackedInt32Array(8, 9, 18), PackedInt32Array(18, 9, 10), PackedInt32Array(18, 10, 19), PackedInt32Array(19, 10, 13), PackedInt32Array(21, 20, 0), PackedInt32Array(0, 20, 15), PackedInt32Array(12, 2, 0), PackedInt32Array(23, 22, 19), PackedInt32Array(19, 22, 18), PackedInt32Array(26, 25, 24), PackedInt32Array(28, 27, 15), PackedInt32Array(30, 29, 31), PackedInt32Array(31, 29, 24), PackedInt32Array(32, 14, 33), PackedInt32Array(33, 14, 29), PackedInt32Array(35, 34, 29), PackedInt32Array(29, 34, 33), PackedInt32Array(36, 26, 37), PackedInt32Array(37, 26, 38), PackedInt32Array(40, 39, 27), PackedInt32Array(27, 39, 38), PackedInt32Array(27, 38, 15), PackedInt32Array(15, 38, 26), PackedInt32Array(15, 26, 29), PackedInt32Array(15, 29, 14), PackedInt32Array(42, 41, 38), PackedInt32Array(38, 41, 37), PackedInt32Array(29, 26, 24), PackedInt32Array(45, 44, 43), PackedInt32Array(47, 46, 48), PackedInt32Array(48, 46, 49), PackedInt32Array(49, 46, 50), PackedInt32Array(48, 49, 33), PackedInt32Array(33, 49, 32), PackedInt32Array(43, 22, 45), PackedInt32Array(45, 22, 51), PackedInt32Array(45, 51, 50), PackedInt32Array(45, 50, 46), PackedInt32Array(22, 23, 51), PackedInt32Array(56, 55, 57), PackedInt32Array(57, 55, 52), PackedInt32Array(52, 55, 53), PackedInt32Array(53, 55, 54)]
cell_size = 3.0
cell_height = 3.0
agent_height = 3.0
agent_radius = 3.0
agent_max_climb = 0.5
agent_max_slope = 60.15

[sub_resource type="Gradient" id="Gradient_e6lj2"]
offsets = PackedFloat32Array(0.2, 1)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_c7s6e"]
noise_type = 2
frequency = 0.03
cellular_jitter = 3.0
cellular_return_type = 0
domain_warp_enabled = true
domain_warp_type = 1
domain_warp_amplitude = 50.0
domain_warp_fractal_type = 2
domain_warp_fractal_lacunarity = 1.5
domain_warp_fractal_gain = 1.0

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_wijl4"]
seamless = true
color_ramp = SubResource("Gradient_e6lj2")
noise = SubResource("FastNoiseLite_c7s6e")

[sub_resource type="Terrain3DMaterial" id="Terrain3DMaterial_e0an3"]
_shader_parameters = {
&"bias_distance": 512.0,
&"blend_sharpness": 0.5,
&"depth_blur": 0.0,
&"enable_macro_variation": true,
&"enable_projection": true,
&"flat_terrain_normals": false,
&"macro_variation1": Color(1, 1, 1, 1),
&"macro_variation2": Color(1, 1, 1, 1),
&"macro_variation_slope": 0.333,
&"mipmap_bias": 1.0,
&"noise1_angle": 0.0,
&"noise1_offset": Vector2(0.5, 0.5),
&"noise1_scale": 0.04,
&"noise2_scale": 0.076,
&"noise_texture": SubResource("NoiseTexture2D_wijl4"),
&"projection_threshold": 0.8
}

[node name="map" type="Node3D"]

[node name="Marker3D" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 29, 5, -40)

[node name="Player" parent="." instance=ExtResource("2_j3r6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 75.73, 1, -2.55343)
collision_layer = 7
collision_mask = 7

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_j3r6d")
navigation_layers = 2

[node name="Terrain3D" type="Terrain3D" parent="NavigationRegion3D"]
data_directory = "res://"
material = SubResource("Terrain3DMaterial_e0an3")
assets = ExtResource("1_md68i")
collision_mode = 3
collision_layer = 2
collision_mask = 0
top_level = true
metadata/_edit_lock_ = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]

[node name="swarm_manager" type="Node3D" parent="."]
script = ExtResource("3_qldgr")

[node name="rat3" parent="swarm_manager" node_paths=PackedStringArray("end_patrol_position") instance=ExtResource("2_iixdh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 34, 10, -130)
platform_floor_layers = 4294967042
end_patrol_position = NodePath("../../Marker3D")

[node name="rat" parent="swarm_manager" node_paths=PackedStringArray("end_patrol_position") instance=ExtResource("2_iixdh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 36, 11, -135)
platform_floor_layers = 4294967042
end_patrol_position = NodePath("../../Marker3D")

[node name="rat2" parent="swarm_manager" node_paths=PackedStringArray("end_patrol_position") instance=ExtResource("2_iixdh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 29, 11, -133)
platform_floor_layers = 4294967042
end_patrol_position = NodePath("../../Marker3D")

[node name="rat4" parent="swarm_manager" node_paths=PackedStringArray("end_patrol_position") instance=ExtResource("2_iixdh")]
transform = Transform3D(0.984906, 0.0989309, 0.142032, -0.096282, 0.995029, -0.02542, -0.14384, 0.0113611, 0.989536, 29, 11, -143)
platform_floor_layers = 4294967042
end_patrol_position = NodePath("../../Marker3D")
